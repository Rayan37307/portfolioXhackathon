---
import client from '@/lib/client'

import BentoItemTypingSpeedContent from './BentoItemTypingSpeedContent'

// Define default values for required props
let data = {
  wpm: 0,
  acc: 0,
  consistency: 0,
  language: 'english' as const,
  time: 0
};

try {
  const response = await client.api.monkeytype.$get()
    .catch(error => {
      console.error('Error fetching monkeytype data:', error);
      return null;
    });

  if (response && 'json' in response) {
    const responseData = await response.json();
    // Merge with defaults to ensure all required props are present
    data = { ...data, ...responseData };
  }

  Astro.response.headers.set('Cache-Control', 'public, max-age=86400');
} catch (error) {
  console.error('Error in BentoItemTypingSpeed:', error);
  // Use default data if there's an error
}
---

<BentoItemTypingSpeedContent {...data} client:only='react' />
